# OSI
> 开放式系统互联模型,使计算机互联为网络的标准框架,该模型将通信系统中的数据流分7层,所有也叫OSI七层模型
- 应用层
  > 应用层（Application Layer）提供为应用软件而设计的接口，以设置与另一应用软件之间的通信。例如：HTTP、HTTPS、FTP、Telnet、SSH、SMTP、POP3等。
- 表示层
  > 表示层（Presentation Layer）把数据转换为能与接收者的系统格式兼容并适合传输的格式。
- 会话层
  > 会话层（Session Layer）负责在数据传输中设置和维护计算机网络中两台计算机之间的通信连接。
- 传输层
  > 传输层（Transport Layer）把传输表头（TH）加至资料以形成分组。传输表头包含了所使用的协议等发送信息。例如:传输控制协议（TCP）等。
- 网络层
  > 网络层（Network Layer）决定数据的路径选择和转寄，将网络表头（NH）加至数据包，以形成分组。网络表头包含了网络资料。例如:互联网协议（IP）等。
- 数据链路层
  > 数据链路层（Data Link Layer）负责网络寻址、错误侦测和改错。当表头和表尾被加至数据包时，会形成信息框（Info Box）。数据链表头（DLH）是包含了物理地址和错误侦测及改错的方法。数据链表尾（DLT）是一串指示数据包末端的字符串。例如以太网、无线局域网（Wi-Fi）和通用分组无线服务（GPRS）等。
    分为两个子层：逻辑链路控制（logical link control，LLC）子层和介质访问控制（Media access control，MAC）子层
- 物理层
  > 物理层（Physical Layer）在局域网上发送数据帧（Data Frame），它负责管理电脑通信设备和网络媒体之间的互通。包括了针脚、电压、线缆规范、集线器、中继器、网卡、主机接口卡等。

# TCP/IP 与 UDP异同
- TCP UDP协议都是OSI模型中传输层的协议
- TCP是面向连接的,保证数据正确性和顺序性.通常不使用TCP的应用有：流媒体、网络游戏、IP电话（VoIP）等等。任何不是很需要可靠性或者是想将功能减到最少的应用可以避免使用TCP。
在很多情况下，当只需要多路复用应用服务时，用户数据报协议（UDP）可以代替TCP为应用提供服务
- UDP是无连接协议,UDP可能丢包且不保证顺序.使用UDP的应用: DNS域名系统,DHCP动态主机配置协议等
- TCP协议的运行分3个阶段(连接创建-数据传输-连接终止),操作系统将TCP连接抽象成本地端点,由套接字socket表示,并提供接口给程序使用.

# TCP 三次握手
> 三次握手过程: 
> - 第一次,A向B发送包含SYN数据的请求(A表达两点:1-请求建立通信,2-用SYN哪个序列号进行消息通信)
> - 第二次,B向A发送ACK和SYN       (B表达两点:1-收到请求,2-使用SYN中指定序列号进行通信)
> - 第三次,A向B发送ACK            (A确认收到B的回复,开始传输数据,三次握手完成)
 

“三次握手”才建立通信的目的是“为了防止已失效连接(connect)的请求报文段传送到了服务端，因而产生错误”.也即为了解决“网络中存在延迟的重复分组”问题。例如：client发出的第一个连接请求报文段并没有丢失，而是在某个网络结点长时间的滞留了，以致延误到连接释放以后的某个时间才到达server。本来这是一个早已失效的报文段。但server收到此失效的连接请求报文段后，就误认为是client发出的一个新的连接请求。于是就向client发出确认报文段，同意创建连接。假设不采用“三次握手”，那么只要server发出确认，新的连接就创建了。
由于现在client并没有发出创建连接的请求，因此不会理睬server的确认，也不会向server发送数据。但server却以为新的运输连接已经创建，并一直等待client发来数据。这样，server的很多资源就白白浪费掉了。采用“三次握手”的办法可以防止上述现象发生，client不会向server的确认发出确认。server由于收不到确认，就知道client并没有要求创建连接

# 四次挥手
因为TCP是全双工通信的,双方都可以主动断开连接
（1）第一次挥手   因此当主动方发送断开连接的请求（即FIN报文）给被动方时，仅仅代表主动方不会再发送数据报文了，但主动方仍可以接收数据报文。    
（2）第二次挥手   被动方此时有可能还有相应的数据报文需要发送，因此需要先发送ACK报文，告知主动方“我知道你想断开连接的请求了”。这样主动方便不会因为没有收到应答而继续发送断开连接的请求（即FIN报文）。   
（3）第三次挥手   被动方在处理完数据报文后，便发送给主动方FIN报文；这样可以保证数据通信正常可靠地完成。发送完FIN报文后，被动方进入LAST_ACK阶段（超时等待）。   
（4）第四次挥手   如果主动方及时发送ACK报文进行连接中断的确认，这时被动方就直接释放连接，进入可用状态
